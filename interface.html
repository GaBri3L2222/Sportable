<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appli Sport Fonctionnelle</title>
    <style>
        :root {
            --primary-border: #2c3e50;
            --box-grey: #c4c4c4;
            --input-grey: #8c8c8c;
            --input-blue: #6495ed;
            --btn-green: #3e7d23;
            --btn-red: #c92a42;
            --text-color: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            background-color: #f4f4f4;
            padding: 20px;
            min-height: 100vh;
        }

        /* Gestion de l'affichage des écrans */
        .screen-card {
            background: white;
            border: 2px solid var(--primary-border);
            border-radius: 20px;
            width: 320px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: flex; /* Par défaut flex */
            flex-direction: column;
            align-items: center;
        }

        /* Classe utilitaire pour cacher un écran */
        .hidden {
            display: none !important;
        }

        h2 {
            color: var(--text-color);
            font-size: 1.2rem;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 600;
        }

        .container-scroll {
            width: 100%;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .separator {
            width: 100%;
            height: 1px;
            background-color: #a0c4ff;
            margin: 10px 0;
            border: none;
        }

        /* Éléments de formulaire */
        .exercise-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
            padding: 5px 0;
            border-bottom: 1px dashed #eee;
        }

        .exercise-name {
            background-color: var(--box-grey);
            padding: 15px 0;
            width: 130px;
            text-align: center;
            border-radius: 5px;
            font-weight: bold;
            color: #444;
            border: none;
            font-size: 0.9rem;
        }

        .exercise-inputs {
            display: flex;
            flex-direction: column;
            gap: 8px;
            font-size: 0.8rem;
            align-items: flex-end;
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .num-box {
            background-color: var(--input-grey);
            border: 1px solid #777;
            width: 40px;
            height: 25px;
            text-align: center;
            color: black;
            font-weight: bold;
            border-radius: 2px;
        }
        
        .num-box.blue {
            background-color: var(--input-blue);
            color: white;
            border: none;
        }

        .rest-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            width: 100%;
            margin: 5px 0;
            font-size: 0.9rem;
            padding: 10px 0;
            background-color: #f9fbfd;
            border-radius: 5px;
        }

        /* Boutons */
        .action-buttons {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 20px;
            gap: 10px;
        }

        .btn-green {
            background-color: var(--btn-green);
            color: white;
            border: none;
            padding: 10px;
            font-size: 0.8rem;
            font-weight: bold;
            border-radius: 4px;
            cursor: pointer;
            flex: 1;
        }

        .btn-green:hover { background-color: #2e611a; }

        .btn-red {
            background-color: var(--btn-red);
            color: white;
            border: none;
            padding: 10px 40px;
            font-size: 1rem;
            font-weight: bold;
            border-radius: 4px;
            margin-top: 20px;
            cursor: pointer;
            text-transform: uppercase;
        }
        .btn-red:hover { background-color: #a81e33; }

        /* Page 2 Spécifique */
        .exercise-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 4px;
            margin: 20px 0;
            background-color: #eee;
        }

        .footer-info {
            width: 100%;
            border-bottom: 2px solid #a0c4ff;
            padding-bottom: 5px;
            margin-bottom: 5px;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
        }

        .footer-label { font-weight: bold; color: #333; }
        .footer-val { color: #666; font-size: 0.85rem; }

        /* Petit bouton Next pour la démo */
        .btn-next {
            background-color: #2c3e50;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 4px;
            margin-top: 10px;
            cursor: pointer;
            font-size: 0.8rem;
        }

    </style>
</head>
<body>

    <div id="creation-screen" class="screen-card">
        <h2>Création d'une séance</h2>

        <div id="workout-list" class="container-scroll">
            
            <div class="exercise-row" data-type="exercise">
                <input type="text" class="exercise-name" value="Pompes">
                <div class="exercise-inputs">
                    <div class="input-group">
                        <span>Répétitions:</span>
                        <input type="number" class="num-box input-reps" value="5">
                    </div>
                    <div class="input-group">
                        <span>Séries:</span>
                        <input type="number" class="num-box input-sets" value="4">
                    </div>
                </div>
            </div>

            <div class="rest-row" data-type="rest">
                <span>Récupération :</span>
                <input type="number" class="num-box blue input-time" value="2">
                <span>min</span>
            </div>

             <div class="exercise-row" data-type="exercise">
                <input type="text" class="exercise-name" value="Squats">
                <div class="exercise-inputs">
                    <div class="input-group">
                        <span>Répétitions:</span>
                        <input type="number" class="num-box input-reps" value="10">
                    </div>
                    <div class="input-group">
                        <span>Séries:</span>
                        <input type="number" class="num-box input-sets" value="3">
                    </div>
                </div>
            </div>

        </div>

        <div class="action-buttons">
            <button class="btn-green" onclick="addExercise()">Ajouter exercice +</button>
            <button class="btn-green" onclick="addRest()">Ajouter récup +</button>
        </div>

        <button class="btn-red" onclick="startWorkout()">START</button>
    </div>

    <div id="active-screen" class="screen-card hidden">
        <h2>Exercice en cours</h2>

        <div class="exercise-row" id="display-exercise-block">
            <div class="exercise-name" id="display-name">...</div>
            <div class="exercise-inputs">
                <div class="input-group">
                    <span>Répétitions restantes :</span>
                    <input type="text" class="num-box" id="display-reps" readonly>
                </div>
                <div class="input-group">
                    <span>Séries restantes :</span>
                    <input type="text" class="num-box" id="display-sets" readonly>
                </div>
            </div>
        </div>

        <div class="rest-row hidden" id="display-rest-block" style="flex-direction: column; padding: 30px 0;">
            <span style="font-size: 1.2rem; font-weight: bold;">Temps de repos</span>
            <div style="font-size: 2.5rem; color: var(--input-blue); font-weight: bold;" id="display-timer">00:00</div>
        </div>

        <img src="https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60" alt="Sport" class="exercise-image">

        <div class="footer-info">
            <span class="footer-label">À venir :</span>
            <span class="footer-val" id="display-next">Fin de séance</span>
        </div>

        <button class="btn-next" onclick="nextStep()">Étape Suivante >></button>

        <button class="btn-red" style="text-transform: none; padding: 8px 30px; margin-top: 10px;" onclick="quitWorkout()">Quitter</button>
    </div>

    <script>
        // --- Variables Globales ---
        let workoutPlan = [];
        let currentStepIndex = 0;

        // --- Fonctions Page 1 : Création ---

        function addExercise() {
            const container = document.getElementById('workout-list');
            const div = document.createElement('div');
            div.className = 'exercise-row';
            div.setAttribute('data-type', 'exercise');
            div.innerHTML = `
                <input type="text" class="exercise-name" value="Nouvel Exo">
                <div class="exercise-inputs">
                    <div class="input-group">
                        <span>Répétitions:</span>
                        <input type="number" class="num-box input-reps" value="10">
                    </div>
                    <div class="input-group">
                        <span>Séries:</span>
                        <input type="number" class="num-box input-sets" value="3">
                    </div>
                </div>
            `;
            container.appendChild(div);
            // Scroll vers le bas
            container.scrollTop = container.scrollHeight;
        }

        function addRest() {
            const container = document.getElementById('workout-list');
            const div = document.createElement('div');
            div.className = 'rest-row';
            div.setAttribute('data-type', 'rest');
            div.innerHTML = `
                <span>Récupération :</span>
                <input type="number" class="num-box blue input-time" value="1">
                <span>min</span>
            `;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        // --- Fonctions de Transition ---

        function startWorkout() {
            // 1. Récupérer les données
            workoutPlan = [];
            const listItems = document.getElementById('workout-list').children;

            for (let item of listItems) {
                const type = item.getAttribute('data-type');
                
                if (type === 'exercise') {
                    workoutPlan.push({
                        type: 'exercise',
                        name: item.querySelector('.exercise-name').value,
                        reps: item.querySelector('.input-reps').value,
                        sets: item.querySelector('.input-sets').value
                    });
                } else if (type === 'rest') {
                    workoutPlan.push({
                        type: 'rest',
                        time: item.querySelector('.input-time').value
                    });
                }
            }

            if (workoutPlan.length === 0) {
                alert("Ajoutez au moins un exercice !");
                return;
            }

            // 2. Changer d'écran
            document.getElementById('creation-screen').classList.add('hidden');
            document.getElementById('active-screen').classList.remove('hidden');

            // 3. Initialiser le premier pas
            currentStepIndex = 0;
            updateActiveScreen();
        }

        function quitWorkout() {
            document.getElementById('active-screen').classList.add('hidden');
            document.getElementById('creation-screen').classList.remove('hidden');
        }

        // --- Fonctions Page 2 : En cours ---

        function updateActiveScreen() {
            // Vérifier si terminé
            if (currentStepIndex >= workoutPlan.length) {
                alert("Séance terminée ! Bravo !");
                quitWorkout();
                return;
            }

            const currentStep = workoutPlan[currentStepIndex];
            const nextStep = workoutPlan[currentStepIndex + 1];

            // Éléments DOM
            const exBlock = document.getElementById('display-exercise-block');
            const restBlock = document.getElementById('display-rest-block');
            const nextLabel = document.getElementById('display-next');

            // Mise à jour du "À venir"
            if (nextStep) {
                if (nextStep.type === 'exercise') {
                    nextLabel.innerText = `${nextStep.name} (${nextStep.sets}x${nextStep.reps})`;
                } else {
                    nextLabel.innerText = `Récupération : ${nextStep.time} min`;
                }
            } else {
                nextLabel.innerText = "Fin de séance";
            }

            // Affichage selon le type
            if (currentStep.type === 'exercise') {
                exBlock.classList.remove('hidden');
                restBlock.classList.add('hidden');

                document.getElementById('display-name').innerText = currentStep.name;
                document.getElementById('display-reps').value = currentStep.reps;
                document.getElementById('display-sets').value = currentStep.sets;

            } else {
                // C'est une récupération
                exBlock.classList.add('hidden');
                restBlock.classList.remove('hidden');
                document.getElementById('display-timer').innerText = currentStep.time + ":00";
            }
        }

        function nextStep() {
            currentStepIndex++;
            updateActiveScreen();
        }

    </script>
</body>
</html>